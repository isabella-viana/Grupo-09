<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gerenciamento de usuários | Eleva</title>
  <link rel="shortcut icon" href="assets/home/logo.svg" type="image/x-icon">
  <link rel="stylesheet" href="css/gerenciamento.css">
  <link rel="stylesheet" href="css/padronizacao.css">
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>

<body>

  <header>
    <div class="header-container">
      <img src="imgs/Logo.png" alt="">
    </div>
  </header>

  <main>
    <div class="cabecalho-esquerdo">

      <div class="opcoes-cabecalho">
        <div class="foto-usuario">
          <img src="assets/gerenciador/User.svg" alt="">
          <p>Eleva User</p>
        </div>

        <div class="icone" id="dash" onclick="irParaDashboard()">
          <i class="bi bi-speedometer2"></i>
          <p>Dashboard</p>
        </div>

        <div class="icone" id="atividade" onclick="irAtividade()">
          <i class="bi bi-building"></i>
          <p>Empresas</p>
        </div>

        <div class="icone" id="atividade" onclick="irAtividade()">
          <i class="bi bi-geo-alt"></i>
          <p>Endereços</p>
        </div>

        <div class="icone" id="grupos" onclick="adicionarUsuario()">
          <i class="bi bi-people"></i>
          <p>Gerenciar</p>
        </div>

        <div class="icone" id="grupos" onclick="adicionarUsuario()">
          <i class="bi bi-person"></i>
          <p>Conta</p>
        </div>
      </div>


      <div class="icone-saida" onclick="sair()">
        <img src="assets/gerenciador/sair.svg" alt="">
      </div>
    </div>

    <div>
      <h1>Gerenciar participantes</h1>
    </div>

    <div>
      <button>
        <p>Remover</p><img src="assets/excluir.svg" alt="">
      </button>
      <button>
        <p>Adicionar</p><img src="assets/adicionar.svg" alt="">
      </button>
      <button>
        <p>Editar</p><img src="assets/editar.svg" alt="">
      </button>
    </div>






    <table> <!-- Cria uma tabela -->
      <thead> <!-- Define o cabeçalho da tabela -->
        <tr> <!-- Define uma linha no cabeçalho da tabela -->
          <th>Nome</th> <!-- Defina uma coluna dentro da linha -->
          <th>E-mail</th>
          <th>Celular</th>
          <th>Área</th>
          <th>Nível</th>
        </tr>
      </thead>
      <tbody> <!-- Cria o corpo da tabela -->
        <tr> <!--Mesma lógica do tr no cabeçalho -->
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
      </tbody>
    </table>
  </main>
</body>

</html>



<script>

  botaoAdicionar.addEventListener("click", () => {
    formAdicionar.style.display = "flex";
  });

  botaoCancelar.addEventListener("click", () => {
    formAdicionar.style.display = "none";
  });

  botaoExcluir.addEventListener("click", async () => {
    const selecionados = document.querySelectorAll(".check-participante:checked");
    const ids = Array.from(selecionados).map(checkbox => {
      return checkbox.closest("tr").dataset.id;
    });

    if (ids.length === 0) return alert("Selecione pelo menos um participante.");

    try {
      await fetch('http://localhost:3000/participantes', {
        method: 'DELETE',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ ids })
      });
      carregarParticipantes();
    } catch (erro) {
      console.error("Erro ao excluir participantes:", erro);
    }
  });


  async function editarParticipante(id, nome, email, telefone) {
    try {
      await fetch(`http://localhost:3000/participantes/${id}`, {
        method: 'PUT',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ nome, email, telefone })
      });
      carregarParticipantes();
    } catch (erro) {
      console.error("Erro ao editar participante:", erro);
    }
  }

  window.onload = carregarParticipantes;


</script>